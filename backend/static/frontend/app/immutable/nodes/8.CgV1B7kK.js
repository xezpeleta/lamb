import{d as Ba,t as l,h as La,b as n,s as g,n as pa,e as da,f as pt,g as va}from"../chunks/DbBWcICI.js";import{p as Ta,j as x,k as fe,A as qa,ab as Na,u as Da,w as We,o as a,l as r,t as S,n as Va,m as e,q as s,$ as Fa,r as t,v as he}from"../chunks/DMsokd5p.js";import{i as b}from"../chunks/MBI0PpQy.js";import{e as Ge,i as st}from"../chunks/D6e1hy_S.js";import{s as Pe,r as _e,d as ua,a as gt,c as Ra}from"../chunks/gPkShxx4.js";import{b as Oe,a as ca}from"../chunks/CFRbuANL.js";import{s as Ka,a as Ya}from"../chunks/BsHaMxS4.js";import{p as Ha}from"../chunks/3ElTuAwM.js";import{g as Et,b as St}from"../chunks/DlJa0Cru.js";import{a as Q}from"../chunks/t--hEgTQ.js";import{u as Qa}from"../chunks/CmzVOFLo.js";function Wa(W,v,c,I,de,T){e(v).selected_models||(e(v).selected_models={}),e(v).selected_models[e(c)]=[...e(I)],e(v).selected_models={...e(v).selected_models},de(`Model selection updated for ${e(c)}`),T()}function Ga(W,v,c,I){s(v,[...e(v),...e(c)],!0),s(c,[],!0),s(I,[],!0)}function Ja(W,v,c,I){s(v,[...e(v),...e(c)],!0),s(I,e(I).filter(de=>!e(c).includes(de)),!0),s(c,[],!0)}function Xa(W,v,c,I){s(v,[...e(v),...e(c)],!0),s(I,e(I).filter(de=>!e(c).includes(de)),!0),s(c,[],!0)}function Za(W,v,c,I){s(v,[...e(v),...e(c)],!0),s(c,[],!0),s(I,[],!0)}function er(W,v,c){s(v,"dashboard"),Et(`${St}/org-admin?view=dashboard`,{replaceState:!0}),c()}function tr(W,v,c){s(v,"users"),Et(`${St}/org-admin?view=users`,{replaceState:!0}),c()}function ar(W,v,c){s(v,"settings"),Et(`${St}/org-admin?view=settings`,{replaceState:!0}),c()}function rr(W,v,c,I){!e(v)&&!e(c)&&I(),s(v,!e(v))}function sr(W,v,c,I,de){s(v,{email:"",name:"",password:"",enabled:!0},!0),s(c,null),s(I,!1),s(de,!0)}async function ir(W,v,c,I,de){var T,Je;try{const O=v();if(!O)throw new Error("Authentication token not found. Please log in again.");await Q.put(c("/org-admin/settings/signup"),e(I),{headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}}),await de(),alert("Signup settings updated successfully!")}catch(O){console.error("Error updating signup settings:",O),Q.isAxiosError(O)&&((Je=(T=O.response)==null?void 0:T.data)!=null&&Je.detail)?alert(`Error: ${O.response.data.detail}`):alert("Error updating signup settings")}}async function or(W,v,c,I,de,T){var Je,O;try{const se=v();if(!se)throw new Error("Authentication token not found. Please log in again.");await Q.put(c("/org-admin/settings/api"),e(I),{headers:{Authorization:`Bearer ${se}`,"Content-Type":"application/json"}}),de(),await T(),alert("API settings updated successfully!")}catch(se){console.error("Error updating API settings:",se),Q.isAxiosError(se)&&((O=(Je=se.response)==null?void 0:Je.data)!=null&&O.detail)?alert(`Error: ${se.response.data.detail}`):alert("Error updating API settings")}}var nr=l('<div class="mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),lr=l('<div class="text-blue-200 text-xs mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),dr=l('<div class="mt-4 bg-blue-800 bg-opacity-50 rounded-md p-4"><div class="flex items-center justify-between"><div><h4 class="text-sm font-medium text-blue-100 mb-1">Organization Signup Key</h4> <div class="font-mono text-white text-lg" id="signup-key-display"> </div></div> <button type="button" class="ml-4 px-3 py-1 bg-blue-600 hover:bg-blue-500 text-white text-sm rounded-md transition-colors"> </button></div> <p class="text-blue-200 text-xs mt-2">Share this key with users to allow them to sign up for your organization</p></div>'),vr=l('<div class="mt-4 bg-yellow-600 bg-opacity-50 rounded-md p-3"><p class="text-yellow-100 text-sm"><svg class="inline h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg> No signup key configured. Users cannot self-register for this organization.</p></div>'),ur=l('<div class="bg-gradient-to-r from-blue-600 to-blue-700 rounded-lg shadow-lg mb-6"><div class="px-6 py-6 text-white"><div class="flex items-center justify-between"><div><h1 class="text-3xl font-bold mb-2"> </h1> <p class="text-blue-100 text-lg">Organization Administration</p></div> <div class="text-right"><!> <div class="text-blue-100 text-sm mb-1">Organization ID</div> <div class="font-mono text-white"> </div></div></div> <!></div></div>'),cr=l('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading dashboard...</p></div>'),pr=l('<span class="text-green-600">‚úì APIs Working</span> <div class="text-sm text-gray-500 mt-1"> </div>',1),gr=l('<span class="text-yellow-600">‚ö† Partial Setup</span> <div class="text-sm text-gray-500 mt-1"> </div>',1),br=l('<span class="text-red-600">‚ùå API Errors</span> <div class="text-sm text-gray-500 mt-1">Check configuration</div>',1),mr=l('<span class="text-gray-600">‚ö† Not Configured</span>'),_r=l('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Organization Statistics</h3> <div class="grid grid-cols-1 gap-5 sm:grid-cols-3"><div class="bg-blue-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Total Users</dt> <dd class="text-lg font-medium text-gray-900"> </dd></dl></div></div></div></div> <div class="bg-green-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Active Users</dt> <dd class="text-lg font-medium text-gray-900"> </dd></dl></div></div></div></div> <div class="bg-yellow-50 overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate">Configuration</dt> <dd class="text-lg font-medium text-gray-900"><!></dd></dl></div></div></div></div></div></div></div> <div class="bg-white overflow-hidden shadow rounded-lg"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Quick Settings</h3> <div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm text-gray-600">Signup Enabled</span> <span> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-gray-600">Signup Key Set</span> <span> </span></div> <div class="flex items-center justify-between"><span class="text-sm text-gray-600">API Configured</span> <span> </span></div></div></div></div>',1),xr=l('<div class="mb-6"><!> <!></div>'),fr=l('<div class="text-xs text-blue-600 mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),hr=l('<div class="bg-white border-l-4 border-blue-500 shadow-sm rounded-lg mb-4"><div class="px-4 py-3"><div class="flex items-center justify-between"><div><h1 class="text-xl font-semibold text-gray-900"> </h1> <p class="text-sm text-gray-600">User Management</p></div> <div class="text-right text-sm text-gray-500"><!> </div></div></div></div>'),yr=l('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),wr=l('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading users...</p></div>'),kr=(W,v,c)=>v(e(c)),Ar=(W,v,c)=>v(e(c)),Cr=pa('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"></path></svg>'),zr=pa('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>'),Er=l('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm font-medium text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap align-top"><div class="text-sm text-gray-800"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-800"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><button class="text-amber-600 hover:text-amber-800 mr-3" title="Change Password" aria-label="Change Password"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg></button> <button><!></button></td></tr>'),Sr=l('<div class="overflow-x-auto shadow-md sm:rounded-lg mb-6 border border-gray-200 svelte-1i4a06e"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Name</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Email</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Role</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Status</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-blue-700 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),Pr=l('<div class="mb-6"><!> <div class="flex justify-between items-center mb-4"><h2 class="text-2xl font-semibold text-gray-800">Manage Users</h2> <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Create User</button></div> <!> <!></div>'),Ur=l('<div class="text-xs text-blue-600 mb-1"><svg class="inline h-3 w-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg> System Admin View</div>'),$r=l('<div class="bg-white border-l-4 border-green-500 shadow-sm rounded-lg mb-4"><div class="px-4 py-3"><div class="flex items-center justify-between"><div><h1 class="text-xl font-semibold text-gray-900"> </h1> <p class="text-sm text-gray-600">Organization Settings</p></div> <div class="text-right text-sm text-gray-500"><!> </div></div></div></div>'),jr=l('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),Mr=l('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div> <p class="mt-2 text-gray-600">Loading settings...</p></div>'),Ir=l('<div><label for="signup-key" class="block text-sm font-medium text-gray-700">Signup Key</label> <input type="text" id="signup-key" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="Enter unique signup key"> <p class="mt-1 text-sm text-gray-500">Unique key for users to signup to this organization (8-64 characters)</p></div>'),Or=l('<div class="py-1"> </div>'),Br=l('<div class="py-1 font-medium"> </div>'),Lr=l('<div class="text-xs text-gray-500"><div class="max-h-20 overflow-y-auto"><!> <!></div></div>'),Tr=l('<div class="text-sm text-gray-600 mb-2"><strong> </strong> models available</div> <!>',1),qr=l('<div class="text-sm text-red-600"> </div>'),Nr=l('<div class="text-xs text-gray-400 mt-2"> </div>'),Dr=l('<div class="border rounded-lg p-4"><div class="flex items-center justify-between mb-2"><h4 class="font-medium text-gray-900 capitalize"> </h4> <span> </span></div> <!> <!></div>'),Vr=l('<div class="text-center py-8 text-gray-500"><p>No API providers configured</p> <p class="text-sm mt-1">Configure OpenAI or Ollama below to get started</p></div>'),Fr=l('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">API Status Overview</h3> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"></div> <!></div></div>'),Rr=(W,v,c)=>e(v).openai_api_key&&c("OpenAI API key updated"),Kr=(W,v,c,I)=>v(c(),I()),Yr=l('<span class="inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded"> </span>'),Hr=l('<div class="flex flex-wrap gap-1"></div>'),Qr=l('<p class="text-gray-500 text-sm italic">No models enabled</p>'),Wr=l('<div class="mb-6 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900 capitalize"> </h4> <button type="button" class="px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700">Manage Models</button></div> <div class="text-sm text-gray-600 mb-2"><strong> </strong> </div> <div class="bg-gray-50 rounded p-3 max-h-32 overflow-y-auto"><!></div></div>'),Gr=l('<div class="text-center py-8 text-gray-500"><p>No API providers configured or available.</p></div>'),Jr=l('<div class="flex items-center"><span class="inline-block w-1 h-1 bg-yellow-600 rounded-full mr-2"></span> </div>'),Xr=l('<div class="mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-yellow-700 font-medium">Unsaved Changes</p> <div class="mt-1 text-sm text-yellow-600"></div> <p class="mt-2 text-sm text-yellow-600">Click "Commit Changes" below to save all modifications to the database.</p></div></div></div>'),Zr=l('<div class="bg-white overflow-hidden shadow rounded-lg mb-6"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Signup Settings</h3> <div class="space-y-4"><div class="flex items-center"><input id="signup-enabled" type="checkbox" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="signup-enabled" class="ml-2 block text-sm text-gray-900">Enable organization-specific signup</label></div> <!> <button class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">Update Signup Settings</button></div></div></div> <!> <div class="bg-white overflow-hidden shadow rounded-lg"><div class="px-4 py-5 sm:p-6"><h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">API Configuration</h3> <div class="space-y-4"><div><label for="openai-key" class="block text-sm font-medium text-gray-700">OpenAI API Key</label> <input type="password" id="openai-key" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"> <p class="mt-1 text-sm text-gray-500"><!></p></div> <div><label for="openai-base-url" class="block text-sm font-medium text-gray-700">OpenAI Base URL</label> <input type="url" id="openai-base-url" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="https://api.openai.com/v1"> <p class="mt-1 text-sm text-gray-500">Custom OpenAI API endpoint. Leave empty to use default (https://api.openai.com/v1).</p></div> <div><label for="ollama-base-url" class="block text-sm font-medium text-gray-700">Ollama Server URL</label> <input type="url" id="ollama-base-url" class="mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" placeholder="http://localhost:11434"> <p class="mt-1 text-sm text-gray-500">URL of your Ollama server. This can be a local or remote Ollama installation.</p></div> <div><h4 class="block text-sm font-medium text-gray-700 mb-3">Model Selection</h4> <p class="text-sm text-gray-500 mb-4">Configure which models are available to users in your organization</p> <!></div> <!> <button> </button></div></div></div>',1),es=l('<div class="mb-6"><!> <h2 class="text-2xl font-semibold text-gray-800 mb-4">Configuration</h2> <!> <!></div>'),ts=l('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline">User created successfully!</span></div>'),as=l('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),rs=l('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email *</label> <input type="email" id="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-4 text-left"><label for="name" class="block text-gray-700 text-sm font-bold mb-2">Name *</label> <input type="text" id="name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-4 text-left"><label for="password" class="block text-gray-700 text-sm font-bold mb-2">Password *</label> <input type="password" id="password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required></div> <div class="mb-6 text-left"><div class="flex items-center"><input type="checkbox" id="enabled" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <label for="enabled" class="ml-2 block text-sm text-gray-900">User enabled</label></div></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline">Cancel</button> <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50"><!></button></div></form>'),ss=l('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900">Create New User</h3> <!></div></div></div>'),is=l('<div class="mt-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline">Password changed successfully!</span></div>'),os=l('<div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><span class="block sm:inline"> </span></div>'),ns=l('<form class="mt-4"><!> <div class="mb-4 text-left"><label for="new-password" class="block text-gray-700 text-sm font-bold mb-2">New Password *</label> <input type="password" id="new-password" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required autocomplete="new-password" minlength="8"> <p class="text-gray-500 text-xs italic mt-1">At least 8 characters recommended</p></div> <div class="flex items-center justify-between"><button type="button" class="bg-gray-300 hover:bg-gray-400 text-gray-800 py-2 px-4 rounded focus:outline-none focus:shadow-outline">Cancel</button> <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline disabled:opacity-50"> </button></div></form>'),ls=l('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center"><div class="relative mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"><div class="mt-3 text-center"><h3 class="text-lg leading-6 font-medium text-gray-900">Change Password</h3> <p class="text-sm text-gray-500 mt-1"> </p> <!></div></div></div>'),ds=(W,v,c)=>{W.target.checked?s(v,[...e(v),e(c)],!0):s(v,e(v).filter(I=>I!==e(c)),!0)},vs=l('<label class="flex items-center p-2 hover:bg-gray-50 border-b last:border-b-0"><input type="checkbox" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <span class="text-sm truncate"> </span></label>'),us=l('<div class="p-4 text-center text-gray-500 text-sm">No models enabled</div>'),cs=(W,v,c)=>{W.target.checked?s(v,[...e(v),e(c)],!0):s(v,e(v).filter(I=>I!==e(c)),!0)},ps=l('<label class="flex items-center p-2 hover:bg-gray-50 border-b last:border-b-0"><input type="checkbox" class="mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"> <span class="text-sm truncate"> </span></label>'),gs=l('<div class="p-4 text-center text-gray-500 text-sm">All models enabled</div>'),bs=l('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white"><div class="mt-3"><div class="flex items-center justify-between mb-4"><h3 class="text-lg font-medium text-gray-900 capitalize"> </h3> <button type="button" class="text-gray-400 hover:text-gray-600" aria-label="Close modal"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="grid grid-cols-1 md:grid-cols-5 gap-4 h-96"><div class="md:col-span-2 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900">Enabled Models</h4> <span class="text-sm text-gray-500"> </span></div> <input type="text" placeholder="Search enabled models..." class="w-full mb-3 px-3 py-2 border border-gray-300 rounded-md text-sm"> <div class="border rounded max-h-64 overflow-y-auto"><!> <!></div></div> <div class="flex flex-col justify-center items-center space-y-2"><button type="button" class="px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50" title="Move all models to enabled">&lt;&lt;</button> <button type="button" class="px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50" title="Move selected models to enabled">&lt;</button> <button type="button" class="px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50" title="Move selected models to disabled">&gt;</button> <button type="button" class="px-3 py-2 bg-red-600 text-white rounded hover:bg-red-700 disabled:opacity-50" title="Move all models to disabled">&gt;&gt;</button></div> <div class="md:col-span-2 border rounded-lg p-4"><div class="flex items-center justify-between mb-3"><h4 class="font-medium text-gray-900">Available Models</h4> <span class="text-sm text-gray-500"> </span></div> <input type="text" placeholder="Search available models..." class="w-full mb-3 px-3 py-2 border border-gray-300 rounded-md text-sm"> <div class="border rounded max-h-64 overflow-y-auto"><!> <!></div></div></div> <div class="flex items-center justify-end mt-6 pt-4 border-t space-x-3"><button type="button" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400">Cancel</button> <button type="button" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Save Changes</button></div></div></div></div>'),ms=l('<div class="min-h-screen bg-gray-50"><nav class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between h-16"><div class="flex"><div class="flex-shrink-0 flex items-center"><h1 class="text-xl font-semibold text-gray-800">Organization Admin</h1></div> <div class="ml-6 flex space-x-8"><button>Dashboard</button> <button>Users</button> <button>Settings</button></div></div> <div class="flex items-center"><span class="text-sm text-gray-600"> </span></div></div></div></nav> <main class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"><div class="px-4 py-6 sm:px-0"><!> <!> <!> <!></div></main></div> <!> <!> <!>',1);function Ss(W,v){Ta(v,!0);const[c,I]=Ka(),de=()=>Ya(Ha,"$page",c);let T=x(null);const Je="/creator/admin";let O=x("dashboard"),se=x(null),w=x(null),bt=x(!1),Be=x(fe([])),mt=x(!1),Xe=x(null),Pt=x(!1),ee=x(fe({email:"",name:"",password:"",enabled:!0})),_t=x(!1),ze=x(null),xt=x(!1),Ut=x(!1),Ue=x(fe({user_id:null,user_name:"",user_email:"",new_password:""})),ft=x(!1),Ke=x(null),ht=x(!1),yt=x(fe({signup_enabled:!1,signup_key:"",signup_key_masked:!1})),ye=x(fe({openai_api_key_set:!1,openai_base_url:"https://api.openai.com/v1",ollama_base_url:"http://localhost:11434",available_models:[],model_limits:{},api_endpoints:{}})),wt=x(!1),Ze=x(null),et=x(fe({signup_enabled:!1,signup_key:""})),ve=x(fe({openai_api_key:"",openai_base_url:"",ollama_base_url:"",available_models:[],model_limits:{},selected_models:{}})),$t=x(!1),jt=x(""),ga=x(fe([])),$e=x(fe([])),Le=x(fe([])),it=x(fe([])),ot=x(fe([])),kt=x(""),At=x(""),Ct=x(""),Mt=x(!1),ue=x(null),nt=x(!1),lt=x(fe([]));function ba(i,d){var o;s(jt,i,!0),s(ga,[...d],!0);const p=((o=e(ve).selected_models)==null?void 0:o[i])||[];s($e,[...p],!0),s(Le,d.filter(u=>!p.includes(u)),!0),s(it,[],!0),s(ot,[],!0),s(kt,""),s(At,""),s($t,!0)}function It(){s($t,!1)}function Rt(i){e(lt).includes(i)||s(lt,[...e(lt),i],!0),s(nt,!0)}function ma(){s(lt,[],!0),s(nt,!1)}function Te(){return!e(T)||!e(T).isLoggedIn||!e(T).token?(console.error("No authentication token available. User must be logged in."),null):e(T).token}function ie(i){return`${Je}${i}`}async function Ot(){var i,d,p;if(e(bt)){console.log("Already loading dashboard, skipping duplicate request");return}console.log("Fetching organization dashboard..."),s(bt,!0),s(se,null);try{const o=Te();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=e(ue)?ie(`/org-admin/dashboard?org=${e(ue)}`):ie("/org-admin/dashboard");console.log(`Fetching dashboard from: ${u}`);const y=await Q.get(u,{headers:{Authorization:`Bearer ${o}`}});console.log("Dashboard API Response:",y.data),s(w,y.data,!0)}catch(o){console.error("Error fetching dashboard:",o),Q.isAxiosError(o)&&((i=o.response)==null?void 0:i.status)===403?s(se,"Access denied. Organization admin privileges required."):Q.isAxiosError(o)&&((p=(d=o.response)==null?void 0:d.data)!=null&&p.detail)?s(se,o.response.data.detail,!0):o instanceof Error?s(se,o.message,!0):s(se,"An unknown error occurred while fetching dashboard."),s(w,null)}finally{s(bt,!1)}}async function _a(){try{const i=Te();if(!i)throw new Error("Authentication token not found");const d=e(ue)?ie(`/org-admin/settings/signup?org=${e(ue)}`):ie("/org-admin/settings/signup"),p=await Q.get(d,{headers:{Authorization:`Bearer ${i}`}});s(Ct,p.data.signup_key||"",!0)}catch(i){console.error("Error fetching signup key:",i),s(Ct,"")}}async function zt(){var i,d,p;if(e(mt)){console.log("Already loading users, skipping duplicate request");return}console.log("Fetching organization users..."),s(mt,!0),s(Xe,null);try{const o=Te();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=e(ue)?ie(`/org-admin/users?org=${e(ue)}`):ie("/org-admin/users");console.log(`Fetching users from: ${u}`);const y=await Q.get(u,{headers:{Authorization:`Bearer ${o}`}});console.log("Users API Response:",y.data),s(Be,y.data||[],!0),console.log(`Fetched ${e(Be).length} users`)}catch(o){console.error("Error fetching users:",o),Q.isAxiosError(o)&&((i=o.response)==null?void 0:i.status)===403?s(Xe,"Access denied. Organization admin privileges required."):Q.isAxiosError(o)&&((p=(d=o.response)==null?void 0:d.data)!=null&&p.detail)?s(Xe,o.response.data.detail,!0):o instanceof Error?s(Xe,o.message,!0):s(Xe,"An unknown error occurred while fetching users."),s(Be,[],!0)}finally{s(mt,!1)}}async function xa(i){var o,u;const d=!i.enabled,p=d?"enable":"disable";if(e(T)&&e(T).email===i.email&&!d){alert("You cannot disable your own account. Please ask another administrator to disable your account if needed.");return}if(confirm(`Are you sure you want to ${p} ${i.name} (${i.email})?`))try{const y=Te();if(!y)throw new Error("Authentication token not found. Please log in again.");const V=ie(`/org-admin/users/${i.id}`);console.log(`${p==="enable"?"Enabling":"Disabling"} user ${i.email} at: ${V}`);const P=await Q.put(V,{enabled:d},{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});console.log(`User ${p} response:`,P.data);const B=e(Be).findIndex(f=>f.id===i.id);B!==-1&&(e(Be)[B].enabled=d,s(Be,[...e(Be)],!0)),alert(`User ${i.name} has been ${d?"enabled":"disabled"} successfully.`)}catch(y){console.error(`Error ${p}ing user:`,y);let V=`Failed to ${p} user.`;Q.isAxiosError(y)&&((u=(o=y.response)==null?void 0:o.data)!=null&&u.detail)?V=y.response.data.detail:y instanceof Error&&(V=y.message),alert(`Error: ${V}`)}}function Kt(){s(Pt,!1),s(ze,null),s(xt,!1)}function fa(i){s(Ue,{user_id:i.id,user_name:i.name,user_email:i.email,new_password:""},!0),s(Ke,null),s(ht,!1),s(Ut,!0)}function Yt(){s(Ut,!1),s(Ke,null),s(ht,!1)}async function ha(i){var d,p;if(i.preventDefault(),!e(Ue).new_password){s(Ke,"Please enter a new password.");return}if(e(Ue).new_password.length<8){s(Ke,"Password should be at least 8 characters.");return}s(Ke,null),s(ft,!0);try{const o=Te();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=ie(`/org-admin/users/${e(Ue).user_id}/password`);console.log(`Changing password for user ${e(Ue).user_email} at: ${u}`);const y=await Q.post(u,{new_password:e(Ue).new_password},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});console.log("Change password response:",y.data),s(ht,!0),setTimeout(()=>{Yt()},1500)}catch(o){console.error("Error changing password:",o);let u="Failed to change password.";Q.isAxiosError(o)&&((p=(d=o.response)==null?void 0:d.data)!=null&&p.detail)?u=o.response.data.detail:o instanceof Error&&(u=o.message),s(Ke,u,!0)}finally{s(ft,!1)}}async function ya(i){var d,p,o;if(i.preventDefault(),!e(ee).email||!e(ee).name||!e(ee).password){s(ze,"Please fill in all required fields.");return}if(!e(ee).email.includes("@")){s(ze,"Please enter a valid email address.");return}s(ze,null),s(_t,!0);try{const u=Te();if(!u)throw new Error("Authentication token not found. Please log in again.");const y=ie("/org-admin/users");console.log(`Creating user at: ${y}`);const V=await Q.post(y,{email:e(ee).email,name:e(ee).name,password:e(ee).password,enabled:e(ee).enabled},{headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}});console.log("Create user response:",V.data),s(xt,!0),setTimeout(()=>{Kt(),zt()},1500)}catch(u){console.error("Error creating user:",u),Q.isAxiosError(u)&&((d=u.response)==null?void 0:d.status)===403?s(ze,"Access denied. Organization admin privileges required."):Q.isAxiosError(u)&&((o=(p=u.response)==null?void 0:p.data)!=null&&o.detail)?s(ze,u.response.data.detail,!0):u instanceof Error?s(ze,u.message,!0):s(ze,"An unknown error occurred while creating user.")}finally{s(_t,!1)}}async function dt(){var i,d,p;if(e(wt)){console.log("Already loading settings, skipping duplicate request");return}console.log("Fetching organization settings..."),s(wt,!0),s(Ze,null);try{const o=Te();if(!o)throw new Error("Authentication token not found. Please log in again.");const u=e(ue)?ie(`/org-admin/settings/signup?org=${e(ue)}`):ie("/org-admin/settings/signup"),y=await Q.get(u,{headers:{Authorization:`Bearer ${o}`}}),V=e(ue)?ie(`/org-admin/settings/api?org=${e(ue)}`):ie("/org-admin/settings/api"),P=await Q.get(V,{headers:{Authorization:`Bearer ${o}`}});s(yt,y.data,!0),s(ye,P.data,!0),s(et,{signup_enabled:e(yt).signup_enabled,signup_key:e(yt).signup_key||""},!0),s(ve,{openai_api_key:"",openai_base_url:e(ye).openai_base_url||"https://api.openai.com/v1",ollama_base_url:e(ye).ollama_base_url||"http://localhost:11434",available_models:Array.isArray(e(ye).available_models)?[...e(ye).available_models]:[],model_limits:{...e(ye).model_limits||{}},selected_models:{...e(ye).selected_models||{}}},!0)}catch(o){console.error("Error fetching settings:",o),Q.isAxiosError(o)&&((i=o.response)==null?void 0:i.status)===403?s(Ze,"Access denied. Organization admin privileges required."):Q.isAxiosError(o)&&((p=(d=o.response)==null?void 0:d.data)!=null&&p.detail)?s(Ze,o.response.data.detail,!0):o instanceof Error?s(Ze,o.message,!0):s(Ze,"An unknown error occurred while fetching settings.")}finally{s(wt,!1)}}qa(()=>{if(console.log("Organization admin page mounted"),Qa.subscribe(d=>{s(T,d,!0)}),!e(T)||!e(T).isLoggedIn){console.log("User not logged in, redirecting to login"),Et(`${St}/auth`,{replaceState:!0});return}const i=de().url.searchParams.get("view")||"dashboard";s(O,i,!0),s(ue,de().url.searchParams.get("org"),!0),e(O)==="dashboard"?Ot():e(O)==="users"?zt():e(O)==="settings"&&dt()}),Na(()=>{console.log("Organization admin page unmounting")}),Da(()=>{e(O)==="dashboard"&&!e(w)?Ot():e(O)==="users"&&e(Be).length===0?zt():e(O)==="settings"&&!e(yt)&&dt()});var Ht=ms();La(i=>{Fa.title="Organization Admin - LAMB"});var Bt=We(Ht),Lt=a(Bt),Qt=a(Lt),Wt=a(Qt),Tt=a(Wt),Gt=r(a(Tt),2),qt=a(Gt);qt.__click=[er,O,Ot];var Nt=r(qt,2);Nt.__click=[tr,O,zt];var Jt=r(Nt,2);Jt.__click=[ar,O,dt],t(Gt),t(Tt);var Xt=r(Tt,2),Zt=a(Xt),wa=a(Zt,!0);t(Zt),t(Xt),t(Wt),t(Qt),t(Lt);var ea=r(Lt,2),ta=a(ea),aa=a(ta);{var ka=i=>{var d=nr(),p=a(d),o=a(p,!0);t(p),t(d),S(()=>g(o,e(se))),n(i,d)};b(aa,i=>{e(se)&&i(ka)})}var ra=r(aa,2);{var Aa=i=>{var d=xr(),p=a(d);{var o=P=>{var B=ur(),f=a(B),k=a(f),m=a(k),A=a(m),z=a(A,!0);t(A),he(2),t(m);var U=r(m,2),$=a(U);{var _=E=>{var N=lr();n(E,N)};b($,E=>{e(ue)&&E(_)})}var F=r($,4),G=a(F,!0);t(F),t(U),t(k);var j=r(k,2);{var L=E=>{var N=dr(),Z=a(N),J=a(Z),C=r(a(J),2),K=a(C,!0);t(C),t(J);var oe=r(J,2);oe.__click=[rr,Mt,Ct,_a];var ne=a(oe,!0);t(oe),t(Z),he(2),t(N),S(()=>{g(K,e(Mt)?e(Ct):"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"),g(ne,e(Mt)?"Hide":"Show")}),n(E,N)},R=E=>{var N=vr();n(E,N)};b(j,E=>{e(w).settings.signup_key_set?E(L):E(R,!1)})}t(f),t(B),S(()=>{g(z,e(w).organization.name),g(G,e(w).organization.slug)}),n(P,B)};b(p,P=>{e(w)&&P(o)})}var u=r(p,2);{var y=P=>{var B=cr();n(P,B)},V=(P,B)=>{{var f=k=>{var m=_r(),A=We(m),z=a(A),U=r(a(z),2),$=a(U),_=a($),F=a(_),G=r(a(F),2),j=a(G),L=r(a(j),2),R=a(L,!0);t(L),t(j),t(G),t(F),t(_),t($);var E=r($,2),N=a(E),Z=a(N),J=r(a(Z),2),C=a(J),K=r(a(C),2),oe=a(K,!0);t(K),t(C),t(J),t(Z),t(N),t(E);var ne=r(E,2),we=a(ne),qe=a(we),ke=r(a(qe),2),Ee=a(ke),ae=r(a(Ee),2),q=a(ae);{var X=me=>{var D=va(),tt=We(D);{var at=Ce=>{var je=pr(),Ye=r(We(je),2),Fe=a(Ye);t(Ye),S(()=>g(Fe,`${e(w).api_status.summary.total_models??""} models available`)),n(Ce,je)},Ve=(Ce,je)=>{{var Ye=Me=>{var He=gr(),Qe=r(We(He),2),le=a(Qe);t(Qe),S(()=>g(le,`${e(w).api_status.summary.working_count??""}/${e(w).api_status.summary.configured_count??""} providers working`)),n(Me,He)},Fe=(Me,He)=>{{var Qe=M=>{var te=br();he(2),n(M,te)},le=M=>{var te=mr();n(M,te)};b(Me,M=>{e(w).api_status.overall_status==="error"?M(Qe):M(le,!1)},He)}};b(Ce,Me=>{e(w).api_status.overall_status==="partial"?Me(Ye):Me(Fe,!1)},je)}};b(tt,Ce=>{e(w).api_status.overall_status==="working"?Ce(at):Ce(Ve,!1)})}n(me,D)},xe=me=>{var D=pt();S(()=>g(D,`${e(w).settings.api_configured?"‚úì":"‚ö†"} API Setup`)),n(me,D)};b(q,me=>{e(w).api_status?me(X):me(xe,!1)})}t(ae),t(Ee),t(ke),t(qe),t(we),t(ne),t(U),t(z),t(A);var Y=r(A,2),re=a(Y),Se=r(a(re),2),Ne=a(Se),h=r(a(Ne),2),H=a(h,!0);t(h),t(Ne);var ce=r(Ne,2),pe=r(a(ce),2),De=a(pe,!0);t(pe),t(ce);var Ae=r(ce,2),ge=r(a(Ae),2),be=a(ge,!0);t(ge),t(Ae),t(Se),t(re),t(Y),S(()=>{g(R,e(w).stats.total_users),g(oe,e(w).stats.active_users),Pe(h,1,`text-sm font-medium ${e(w).settings.signup_enabled?"text-green-600":"text-gray-400"}`),g(H,e(w).settings.signup_enabled?"Yes":"No"),Pe(pe,1,`text-sm font-medium ${e(w).settings.signup_key_set?"text-green-600":"text-gray-400"}`),g(De,e(w).settings.signup_key_set?"Yes":"No"),Pe(ge,1,`text-sm font-medium ${e(w).settings.api_configured?"text-green-600":"text-gray-400"}`),g(be,e(w).settings.api_configured?"Yes":"No")}),n(k,m)};b(P,k=>{e(w)&&k(f)},B)}};b(u,P=>{e(bt)?P(y):P(V,!1)})}t(d),n(i,d)};b(ra,i=>{e(O)==="dashboard"&&i(Aa)})}var sa=r(ra,2);{var Ca=i=>{var d=Pr(),p=a(d);{var o=m=>{var A=hr(),z=a(A),U=a(z),$=a(U),_=a($),F=a(_,!0);t(_),he(2),t($);var G=r($,2),j=a(G);{var L=E=>{var N=fr();n(E,N)};b(j,E=>{e(ue)&&E(L)})}var R=r(j);t(G),t(U),t(z),t(A),S(()=>{g(F,e(w).organization.name),g(R,` ${e(w).stats.total_users??""} users ‚Ä¢ ${e(w).stats.active_users??""} active`)}),n(m,A)};b(p,m=>{e(w)&&m(o)})}var u=r(p,2),y=r(a(u),2);y.__click=[sr,ee,ze,xt,Pt],t(u);var V=r(u,2);{var P=m=>{var A=yr(),z=a(A),U=a(z,!0);t(z),t(A),S(()=>g(U,e(Xe))),n(m,A)};b(V,m=>{e(Xe)&&m(P)})}var B=r(V,2);{var f=m=>{var A=wr();n(m,A)},k=m=>{var A=Sr(),z=a(A),U=r(a(z));Ge(U,21,()=>e(Be),$=>$.id,($,_,F,G)=>{var j=Er(),L=a(j),R=a(L),E=a(R,!0);t(R),t(L);var N=r(L),Z=a(N),J=a(Z,!0);t(Z),t(N);var C=r(N),K=a(C),oe=a(K,!0);t(K),t(C);var ne=r(C),we=a(ne),qe=a(we,!0);t(we),t(ne);var ke=r(ne),Ee=a(ke);Ee.__click=[kr,fa,_];var ae=r(Ee,2);ae.__click=[Ar,xa,_];var q=a(ae);{var X=Y=>{var re=Cr();n(Y,re)},xe=Y=>{var re=zr();n(Y,re)};b(q,Y=>{e(_).enabled?Y(X):Y(xe,!1)})}t(ae),t(ke),t(j),S(()=>{g(E,e(_).name||"-"),g(J,e(_).email),Pe(K,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(_).role==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`),g(oe,e(_).role),Pe(we,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${e(_).enabled?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),g(qe,e(_).enabled?"Active":"Disabled"),Pe(ae,1,Ra(e(T)&&e(T).email===e(_).email&&e(_).enabled?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800")),gt(ae,"title",e(T)&&e(T).email===e(_).email&&e(_).enabled?"You cannot disable your own account":e(_).enabled?"Disable User":"Enable User"),gt(ae,"aria-label",e(T)&&e(T).email===e(_).email&&e(_).enabled?"You cannot disable your own account":e(_).enabled?"Disable User":"Enable User"),ae.disabled=e(T)&&e(T).email===e(_).email&&e(_).enabled}),n($,j)}),t(U),t(z),t(A),n(m,A)};b(B,m=>{e(mt)?m(f):m(k,!1)})}t(d),n(i,d)};b(sa,i=>{e(O)==="users"&&i(Ca)})}var za=r(sa,2);{var Ea=i=>{var d=es(),p=a(d);{var o=f=>{var k=$r(),m=a(k),A=a(m),z=a(A),U=a(z),$=a(U,!0);t(U),he(2),t(z);var _=r(z,2),F=a(_);{var G=L=>{var R=Ur();n(L,R)};b(F,L=>{e(ue)&&L(G)})}var j=r(F);t(_),t(A),t(m),t(k),S(()=>{g($,e(w).organization.name),g(j,` ID: ${e(w).organization.slug??""}`)}),n(f,k)};b(p,f=>{e(w)&&f(o)})}var u=r(p,4);{var y=f=>{var k=jr(),m=a(k),A=a(m,!0);t(m),t(k),S(()=>g(A,e(Ze))),n(f,k)};b(u,f=>{e(Ze)&&f(y)})}var V=r(u,2);{var P=f=>{var k=Mr();n(f,k)},B=f=>{var k=Zr(),m=We(k),A=a(m),z=r(a(A),2),U=a(z),$=a(U);_e($),he(2),t(U);var _=r(U,2);{var F=h=>{var H=Ir(),ce=r(a(H),2);_e(ce),he(2),t(H),Oe(ce,()=>e(et).signup_key,pe=>e(et).signup_key=pe),n(h,H)};b(_,h=>{e(et).signup_enabled&&h(F)})}var G=r(_,2);G.__click=[ir,Te,ie,et,dt],t(z),t(A),t(m);var j=r(m,2);{var L=h=>{var H=Fr(),ce=a(H),pe=r(a(ce),2);Ge(pe,21,()=>Object.entries(e(w).api_status.providers),st,(ge,be)=>{let me=()=>e(be)[0],D=()=>e(be)[1];var tt=Dr(),at=a(tt),Ve=a(at),Ce=a(Ve,!0);t(Ve);var je=r(Ve,2),Ye=a(je,!0);t(je),t(at);var Fe=r(at,2);{var Me=M=>{var te=Tr(),Re=We(te),Ie=a(Re),rt=a(Ie,!0);t(Ie),he(),t(Re);var Dt=r(Re,2);{var ja=Vt=>{var Ft=Lr(),na=a(Ft),la=a(na);Ge(la,17,()=>D().models.slice(0,10),st,(vt,ut)=>{var ct=Or(),Oa=a(ct,!0);t(ct),S(()=>g(Oa,e(ut))),n(vt,ct)});var Ma=r(la,2);{var Ia=vt=>{var ut=Br(),ct=a(ut);t(ut),S(()=>g(ct,`...and ${D().models.length-10} more`)),n(vt,ut)};b(Ma,vt=>{D().models.length>10&&vt(Ia)})}t(na),t(Ft),n(Vt,Ft)};b(Dt,Vt=>{D().models&&D().models.length>0&&Vt(ja)})}S(()=>g(rt,D().model_count)),n(M,te)},He=(M,te)=>{{var Re=Ie=>{var rt=qr(),Dt=a(rt,!0);t(rt),S(()=>g(Dt,D().error)),n(Ie,rt)};b(M,Ie=>{D().error&&Ie(Re)},te)}};b(Fe,M=>{D().status==="working"?M(Me):M(He,!1)})}var Qe=r(Fe,2);{var le=M=>{var te=Nr(),Re=a(te,!0);t(te),S(()=>g(Re,D().api_base)),n(M,te)};b(Qe,M=>{D().api_base&&M(le)})}t(tt),S(()=>{g(Ce,me()),Pe(je,1,`px-2 py-1 text-xs rounded-full ${D().status==="working"?"bg-green-100 text-green-800":D().status==="error"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`),g(Ye,D().status)}),n(ge,tt)}),t(pe);var De=r(pe,2);{var Ae=ge=>{var be=Vr();n(ge,be)};b(De,ge=>{Object.keys(e(w).api_status.providers).length===0&&ge(Ae)})}t(ce),t(H),n(h,H)};b(j,h=>{e(w)&&e(w).api_status&&h(L)})}var R=r(j,2),E=a(R),N=r(a(E),2),Z=a(N),J=r(a(Z),2);_e(J),J.__input=[Rr,ve,Rt];var C=r(J,2),K=a(C);{var oe=h=>{var H=pt("API key is currently set. Enter a new key to replace it.");n(h,H)},ne=h=>{var H=pt("Enter your OpenAI API key to enable AI features.");n(h,H)};b(K,h=>{e(ye).openai_api_key_set?h(oe):h(ne,!1)})}t(C),t(Z);var we=r(Z,2),qe=r(a(we),2);_e(qe),he(2),t(we);var ke=r(we,2),Ee=r(a(ke),2);_e(Ee),he(2),t(ke);var ae=r(ke,2),q=r(a(ae),4);{var X=h=>{var H=va(),ce=We(H);Ge(ce,17,()=>Object.entries(e(ye).available_models),st,(pe,De)=>{let Ae=()=>e(De)[0],ge=()=>e(De)[1];var be=Wr(),me=a(be),D=a(me),tt=a(D,!0);t(D);var at=r(D,2);at.__click=[Kr,ba,Ae,ge],t(me);var Ve=r(me,2),Ce=a(Ve),je=a(Ce,!0);t(Ce);var Ye=r(Ce);t(Ve);var Fe=r(Ve,2),Me=a(Fe);{var He=le=>{var M=Hr();Ge(M,21,()=>e(ve).selected_models[Ae()],st,(te,Re)=>{var Ie=Yr(),rt=a(Ie,!0);t(Ie),S(()=>g(rt,e(Re))),n(te,Ie)}),t(M),n(le,M)},Qe=le=>{var M=Qr();n(le,M)};b(Me,le=>{var M,te;((te=(M=e(ve).selected_models)==null?void 0:M[Ae()])==null?void 0:te.length)>0?le(He):le(Qe,!1)})}t(Fe),t(be),S(()=>{var le,M;g(tt,Ae()),g(je,((M=(le=e(ve).selected_models)==null?void 0:le[Ae()])==null?void 0:M.length)||0),g(Ye,` of ${ge().length??""} models enabled`)}),n(pe,be)}),n(h,H)},xe=h=>{var H=Gr();n(h,H)};b(q,h=>{e(ye).available_models&&Object.keys(e(ye).available_models).length>0?h(X):h(xe,!1)})}t(ae);var Y=r(ae,2);{var re=h=>{var H=Xr(),ce=a(H),pe=r(a(ce),2),De=r(a(pe),2);Ge(De,21,()=>e(lt),st,(Ae,ge)=>{var be=Jr(),me=r(a(be));t(be),S(()=>g(me,` ${e(ge)??""}`)),n(Ae,be)}),t(De),he(2),t(pe),t(ce),t(H),n(h,H)};b(Y,h=>{e(nt)&&h(re)})}var Se=r(Y,2);Se.__click=[or,Te,ie,ve,ma,dt];var Ne=a(Se,!0);t(Se),t(N),t(E),t(R),S(()=>{gt(J,"placeholder",e(ye).openai_api_key_set?"‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢":"Enter OpenAI API key"),Pe(Se,1,`${e(nt)?"bg-green-600 hover:bg-green-700 ring-2 ring-green-300":"bg-blue-600 hover:bg-blue-700"} text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-all duration-200`),g(Ne,e(nt)?"üíæ Commit Changes":"Update API Settings")}),ca($,()=>e(et).signup_enabled,h=>e(et).signup_enabled=h),Oe(J,()=>e(ve).openai_api_key,h=>e(ve).openai_api_key=h),Oe(qe,()=>e(ve).openai_base_url,h=>e(ve).openai_base_url=h),Oe(Ee,()=>e(ve).ollama_base_url,h=>e(ve).ollama_base_url=h),n(f,k)};b(V,f=>{e(wt)?f(P):f(B,!1)})}t(d),n(i,d)};b(za,i=>{e(O)==="settings"&&i(Ea)})}t(ta),t(ea),t(Bt);var ia=r(Bt,2);{var Sa=i=>{var d=ss(),p=a(d),o=a(p),u=r(a(o),2);{var y=P=>{var B=ts();n(P,B)},V=P=>{var B=rs(),f=a(B);{var k=C=>{var K=as(),oe=a(K),ne=a(oe,!0);t(oe),t(K),S(()=>g(ne,e(ze))),n(C,K)};b(f,C=>{e(ze)&&C(k)})}var m=r(f,2),A=r(a(m),2);_e(A),t(m);var z=r(m,2),U=r(a(z),2);_e(U),t(z);var $=r(z,2),_=r(a($),2);_e(_),t($);var F=r($,2),G=a(F),j=a(G);_e(j),he(2),t(G),t(F);var L=r(F,2),R=a(L);R.__click=Kt;var E=r(R,2),N=a(E);{var Z=C=>{var K=pt("Creating...");n(C,K)},J=C=>{var K=pt("Create User");n(C,K)};b(N,C=>{e(_t)?C(Z):C(J,!1)})}t(E),t(L),t(B),S(()=>E.disabled=e(_t)),da("submit",B,ya),Oe(A,()=>e(ee).email,C=>e(ee).email=C),Oe(U,()=>e(ee).name,C=>e(ee).name=C),Oe(_,()=>e(ee).password,C=>e(ee).password=C),ca(j,()=>e(ee).enabled,C=>e(ee).enabled=C),n(P,B)};b(u,P=>{e(xt)?P(y):P(V,!1)})}t(o),t(p),t(d),n(i,d)};b(ia,i=>{e(Pt)&&i(Sa)})}var oa=r(ia,2);{var Pa=i=>{var d=ls(),p=a(d),o=a(p),u=r(a(o),2),y=a(u);t(u);var V=r(u,2);{var P=f=>{var k=is();n(f,k)},B=f=>{var k=ns(),m=a(k);{var A=j=>{var L=os(),R=a(L),E=a(R,!0);t(R),t(L),S(()=>g(E,e(Ke))),n(j,L)};b(m,j=>{e(Ke)&&j(A)})}var z=r(m,2),U=r(a(z),2);_e(U),he(2),t(z);var $=r(z,2),_=a($);_.__click=Yt;var F=r(_,2),G=a(F,!0);t(F),t($),t(k),S(()=>{F.disabled=e(ft),g(G,e(ft)?"Changing...":"Change Password")}),da("submit",k,ha),Oe(U,()=>e(Ue).new_password,j=>e(Ue).new_password=j),n(f,k)};b(V,f=>{e(ht)?f(P):f(B,!1)})}t(o),t(p),t(d),S(()=>g(y,`Set a new password for ${e(Ue).user_name??""} (${e(Ue).user_email??""})`)),n(i,d)};b(oa,i=>{e(Ut)&&i(Pa)})}var Ua=r(oa,2);{var $a=i=>{var d=bs(),p=a(d),o=a(p),u=a(o),y=a(u),V=a(y);t(y);var P=r(y,2);P.__click=It,t(u);var B=r(u,2),f=a(B),k=a(f),m=r(a(k),2),A=a(m);t(m),t(k);var z=r(k,2);_e(z);var U=r(z,2),$=a(U);Ge($,17,()=>e($e).filter(q=>q.toLowerCase().includes(e(kt).toLowerCase())),st,(q,X)=>{var xe=vs(),Y=a(xe);_e(Y),Y.__change=[ds,it,X];var re=r(Y,2),Se=a(re,!0);t(re),t(xe),S(Ne=>{ua(Y,Ne),gt(re,"title",e(X)),g(Se,e(X))},[()=>e(it).includes(e(X))]),n(q,xe)});var _=r($,2);{var F=q=>{var X=us();n(q,X)};b(_,q=>{e($e).length===0&&q(F)})}t(U),t(f);var G=r(f,2),j=a(G);j.__click=[Ga,$e,Le,ot];var L=r(j,2);L.__click=[Ja,$e,ot,Le];var R=r(L,2);R.__click=[Xa,Le,it,$e];var E=r(R,2);E.__click=[Za,Le,$e,it],t(G);var N=r(G,2),Z=a(N),J=r(a(Z),2),C=a(J);t(J),t(Z);var K=r(Z,2);_e(K);var oe=r(K,2),ne=a(oe);Ge(ne,17,()=>e(Le).filter(q=>q.toLowerCase().includes(e(At).toLowerCase())),st,(q,X)=>{var xe=ps(),Y=a(xe);_e(Y),Y.__change=[cs,ot,X];var re=r(Y,2),Se=a(re,!0);t(re),t(xe),S(Ne=>{ua(Y,Ne),gt(re,"title",e(X)),g(Se,e(X))},[()=>e(ot).includes(e(X))]),n(q,xe)});var we=r(ne,2);{var qe=q=>{var X=gs();n(q,X)};b(we,q=>{e(Le).length===0&&q(qe)})}t(oe),t(N),t(B);var ke=r(B,2),Ee=a(ke);Ee.__click=It;var ae=r(Ee,2);ae.__click=[Wa,ve,jt,$e,Rt,It],t(ke),t(o),t(p),t(d),S(()=>{g(V,`Manage ${e(jt)??""} Models`),g(A,`(${e($e).length??""})`),j.disabled=e(Le).length===0,L.disabled=e(ot).length===0,R.disabled=e(it).length===0,E.disabled=e($e).length===0,g(C,`(${e(Le).length??""})`)}),Oe(z,()=>e(kt),q=>s(kt,q)),Oe(K,()=>e(At),q=>s(At,q)),n(i,d)};b(Ua,i=>{e($t)&&i($a)})}S(()=>{var i;Pe(qt,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(O)==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),Pe(Nt,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(O)==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),Pe(Jt,1,`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium transition-colors duration-200 ${e(O)==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`),g(wa,((i=e(T))==null?void 0:i.email)||"Organization Admin")}),n(W,Ht),Va(),I()}Ba(["click","input","change"]);export{Ss as component};
